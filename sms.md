我需要的sms发送流程是这样的：创建模版-〉选择渠道-〉选择国家-〉选择号码-〉选择模版-〉发送-〉生成批次-〉查询批次列表-〉查询批次详情-〉查询日期范围内的所有发送

1. 租户和用户
   1. 我们系统默认初始化的时候会有一个名称为PNS的租户。
   2. 我们系统默认初始化的时候会有一个admin的租户，密码为admin123，角色为ADMIN，它需要和PNS租户关联。
   3. 我们需要一个创建租户的接口，我们会传入{tenantname:"PNS-usps"}，如果我们传入{tenantsName:"PNS"}，则返回失败，因为已经有usps这个租户了。
   4. 我们需要一个创建用户的接口，创建用户的接口需要有{username:"",password:"",tenantname:"",role:""}，tenantname就是关联的租户名，role分为"ADMIN"和"USER"两种。
   5. 我们需要一个通过tenantname查询所有用户的接口。
   6. 以上接口都是自用的，不需要通过jwt鉴权。
2. 创建模版：
   1. 模版关联到租户下面，租户下面的所有用户都可以共享这些模版，可以创建、删除、查询模版。（这里有三个接口，模版最多生成10个，创建的时候要查询这个租户下面有多少个模版，然后超过十个就返回超出了最大模版限制。查询的时候就不需要关联日期等字段，只需要返回即可）
3. 选择渠道：
   1. 每个租户下可以对应多个用户，这里我们使用租户是为了拓展以后的业务，当前这一版本租户的概念还是比较淡的。
   2. 每个租户有多个渠道，租户会共享一些配置。以buka为例，我们新建了一个usps的租户，那么buka的apikey和apiscrite需要你新建一个接口进行配置。这个接口叫set-sms-channel，这样我们就知道这是一个设置sms服务的渠道。我们请求传入{channel:"buka",apikey:"",apisecret:""}，这就是专属buka这个渠道的配置，重复请求的话就更新这个配置。其它渠道有不同处理方式，我们现在只需要实现buka的就可以，但是要保证这个是灵活的，当我们后续加渠道的时候可以也通过类似接口配置。
   3. 用户使用渠道同样需要配置，每个渠道都有不同的配置方式，由于我们要先实现buka，所以我们还是以buka为例。admin这个账号想要使用租户的buka渠道，那么这个admin用户需要配置buka的appid，这里要写一个接口叫set-sms-buka，传入{tenantname:"",username:"",appid:""}，注意这个接口同样不需要jwt鉴权。那么它后面通过buka发送短信、批次查询这些接口就可以通过https://www.onbuka.com/zh-cn/sms-api1/这个接口签名鉴权。该接口使用租户的apikey、apisecret和admin自己的appid，来生成Sign查询。
   4. 每个渠道都有不同的模块去处理，我们现在只有一个渠道，所以只谈buka，但是以后还会有其它渠道接入进来，所以这块要模块化的进行拆分。
4. 选择国家：
   1. 当前buka只支持日本、韩国、美国、英国、危地马拉、克罗地亚、墨西哥、西班牙、埃及、沙特、南非、印尼、越南、澳洲、意大利、安哥拉、喀麦隆、加纳这几个国家，所以每个渠道支持的国家是不一样的。所以当我们选择渠道为buka，再选择国家的时候，你需要提供一个get接口来返回buka这个渠道支持的国家，接口叫做support-countries。请求参数是{channel:"buka"}。那么你需要通过数组的形式返回这些国家的电话区号。这块需要单独一个字段在专属buka的表里存储。
5. 选择号码：
   1. 号码还是跟当前实现一致，前端会通过字符串的方式传输给你，如果只有一条比如15453512354，如果多条就是以15453512354,15453512354,15453512354这种用英文符号隔开的形式给你，前端给你的号码都是删除了国家区号的，你需要通过上一步的选择国家把它们拼接起来进行发送。
6. 选择模版：
   1. 还是当前项目中的方案
7. 发送：
   1. 发送需要带上模版、号码、渠道。通过不同的渠道分发到对应渠道的模版里。对应的模版都应该有发送方法，它应该继承于SMSChannel这个大类，在子类中改写具体的实现方式。具体实现api可通过文档https://www.onbuka.com/zh-cn/sms-api3/进行查看。你需要自定义orderId保存，后面查询中会需要。
   2. 它返回的参数你可以当作当前SMSChannel这个大类的标准，后面有其它返回我们根据这个进行适配。
8. 生成批次：
   1. 每个批次都有对应的id，这个id记录了发送返回的单个或者多个orderId。每个批次都是同一渠道发送的，不会有多渠道发送。
9. 查询批次列表：
   1. 查询批次列表接口按照现有的去返回即可。
   2. 你是不好计算成功数、失败数和发送状态的。每个渠道有不同的查询方法，我们说buka的具体实现过程。你需要通过https://www.onbuka.com/zh-cn/sms-api5/这个接口，查询时间段内的短信发送结果。起始时间是批次创建的时间，结束时间是起始时间+5s。根据它返回的接口来进行统计和状态管理。所以每次查询批次列表的时候，我希望你有两个接口。第一个接口只是返回表中可查的数据。第二个接口是第一个接口的补充，因为你要查每个批次中统计的信息，这个可以慢一点返回，这样会有一个更好的体验。
   3. 批次列表中是有不同渠道的，比如A批次是buka，B批次是ali，那么你第二个接口需要调用不同渠道的查询方法进行统计。
10. 查询批次详情
    1. 当我们点击某个批次后，我们可以查询它的详情
    2. 我们在查询这个批次的时候需要调用对应模版的查询方法，查看详情的时候要带上渠道标识来通过对应渠道的查询方法查询。发送中我已经提到过，比如buka它应该继承于SMSChannel大类，下面改写查询方法，以适配buka这个平台。
    3. buka查询文档是https://www.onbuka.com/zh-cn/sms-api4/，你根据它提供的内容实现具体细节。
11. 查询日期范围内的所有发送
    1. 这个就需要你拼凑多个渠道的数据了，如果说前端需要查一百条，那你就得在每个平台查一百条，根据时间排序前一百条返回给前端。如果前端通过日期查询，那你也是同样的道理进行查询。
